/*! vanillajs v1.2.0 | (c) 2018 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/vanilla-js-podcast | Open Source Credits: https://github.com/filamentgroup/loadJS/, https://github.com/filamentgroup/loadCSS, https://github.com/bramstein/fontfaceobserver */
window.Array&&!Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){t=t||window;for(var s=0;s<this.length;s++)e.call(t,this[s],s,this)});var latestEpisodes=function(e){"use strict";if(e){var t={itunes:"https://itunes.apple.com/us/podcast/the-vanilla-js-podcast/id1364574460",soundcloud:"https://soundcloud.com/vanillajspodcast/"},s=function(e){return e=e.toString(),e.length<2?"0"+e:e},a=function(e){return{minutes:Math.floor(e/1e3/60),seconds:s(Math.floor(e/1e3%60))}},n=function(e){var s="";return e.forEach((function(e){var n=e.title.split(" - "),i=a(e.duration);s+='<li class="margin-bottom-small"><strong class="margin-right">'+n[0]+'</strong><a class="link-no-underline" href="'+t.soundcloud+e.permalink+'">'+n[1]+'</a> <span class="text-small text-muted">('+i.minutes+":"+i.seconds+")</span></li>"})),s},i=function(s){var a='<h2 class="h3">Latest Episodes</h2>';a+=n(s),e.innerHTML='<ul class="list-unstyled margin-bottom-medium">'+a+'</ul><p><em>Listen to full series on <a href="'+t.itunes+'">iTunes</a> or <a href="'+t.soundcloud+'">SoundCloud</a>.</em></p>'};!(function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&i(JSON.parse(e.response))},e.open("GET","https://api.soundcloud.com/users/422835952/tracks?client_id=HDNfsDscL9cEWTl8lfqFKfLPTErC4Qio"),e.send()})()}},mailchimp=function(e){"use strict";var t=document.querySelector("#mailchimp-form");if(t){var s=t.querySelector("#mailchimp-email");if(s){var a=t.querySelector("#mc-status"),n={empty:"Please provide an email address.",notEmail:"Please use a valid email address.",success:"Success! You'll get an email each time a new podcast episode is available."},i=function(e){for(var t=[],s=0;s<e.elements.length;s++){var a=e.elements[s];a.name&&!a.disabled&&"file"!==a.type&&"reset"!==a.type&&"submit"!==a.type&&"button"!==a.type&&(("checkbox"!==a.type&&"radio"!==a.type||a.checked)&&t.push(encodeURIComponent(a.name)+"="+encodeURIComponent(a.value)))}return t.join("&")},o=function(){a&&(a.textContent="",a.className="",s.className="",s.removeAttribute("aria-describedby"))},r=function(e,t){a&&(a.textContent=e,t?(a.className="success-message",a.setAttribute("tabindex","-1"),a.focus()):(a.className="error-message",s.className="error",s.setAttribute("aria-describedby","mc-status"),s.focus()))},c=function(){var e=t.querySelector("[data-processing]");e&&(e.setAttribute("data-original",e.innerHTML),e.setAttribute("disabled","disabled"),e.innerHTML=e.getAttribute("data-processing"))},x=function(){var e=t.querySelector("[data-processing]");e&&(e.removeAttribute("disabled"),e.innerHTML=e.getAttribute("data-original"))},u=function(t){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){var t=200===s.status,a=JSON.parse(s.responseText);t?r(n.success,t):r(a.message,t),x(),e&&"function"==typeof e&&e(a)}},s.open("POST","https://gomakethings.com/checkout/wp-json/gmt-mailchimp/v1/subscribe?"+t),s.send()},l=function(){c(),u(i(t))},d=function(){return/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$/.test(s.value)},f=function(){return s.value.length<1?(r(n.empty),!1):!!d()||(r(n.notEmail),!1)},m=function(e){e.preventDefault(),o(),f()&&l()};t.addEventListener("submit",m,!1)}}};document.querySelector("#mailchimp-form")&&mailchimp();var episodes=document.querySelector("#latest-episodes");episodes&&latestEpisodes(episodes);