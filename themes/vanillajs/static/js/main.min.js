/*! vanillajs v1.3.0 | (c) 2018 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/vanilla-js-podcast | Open Source Credits: https://github.com/filamentgroup/loadJS/, https://github.com/filamentgroup/loadCSS, https://github.com/bramstein/fontfaceobserver */
window.Array&&!Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){t=t||window;for(var a=0;a<this.length;a++)e.call(t,this[a],a,this)});var api=function(){"use strict";var e=document.querySelectorAll("[data-cta]"),t=document.querySelectorAll("[data-testimonial]"),a=document.querySelectorAll("[data-price]"),s=function(e,t){var a=e.getAttribute("data-no-photo");e.innerHTML=a?"<blockquote>"+t.quote+(t.url?'<cite>- <a href="'+t.url+'">'+t.name+"</a></cite>":"<cite>- "+t.name+"</cite>")+"</blockquote>":'<div class="row"><div class="grid-third"><img class="aligncenter margin-bottom-small img-circle" height="150" width="150" src="https://gomakethings.com'+t.photo+'"></div><div class="grid-two-thirds"><blockquote>'+t.quote+(t.url?'<cite>- <a href="'+t.url+'">'+t.name+"</a></cite>":"<cite>- "+t.name+"</cite>")+"</blockquote></div></div>"},i=function(e,t){e.innerHTML=t},n=function(e,t,a){var s=e.getAttribute("data-product");if(s){var i="guide-individual"===a&&t["guides-all"]?t["guides-all"]:t[a];i&&(!i[s]||i[s].length<1||(e.innerHTML=i[s]))}},o=function(e,t,a){for(var o=0;o<e.length;o++){var r=e[o].getAttribute("data-"+a);r&&("price"===a||t[r])&&("price"===a?n(e[o],t,r):"cta"===a?i(e[o],t[r]):s(e[o],t[r]))}},r=function(s,i){i&&sessionStorage.setItem("gmt-api-data",s);var s=JSON.parse(s);o(e,s.ctas,"cta"),o(t,s.testimonials,"testimonial"),o(a,s.prices,"price")};e.length<1&&t.length<1&&a.length<1||(function(e){var t=sessionStorage.getItem("gmt-api-data");if(t)return void r(t);var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&r(a.responseText,!0)},a.open("GET",e),a.send()})("https://gomakethings.com/api/data.json")},latestEpisodes=function(e){"use strict";if(e){var t={itunes:"https://itunes.apple.com/us/podcast/the-vanilla-js-podcast/id1364574460",soundcloud:"https://soundcloud.com/vanillajspodcast/"},a=function(e){return e=e.toString(),e.length<2?"0"+e:e},s=function(e){return{minutes:Math.floor(e/1e3/60),seconds:a(Math.floor(e/1e3%60))}},i=function(e){var a="";return e.forEach((function(e){var i=e.title.split(" - "),n=s(e.duration);a+='<li class="margin-bottom-small"><strong class="margin-right">'+i[0]+'</strong><a class="link-no-underline" href="'+t.soundcloud+e.permalink+'">'+i[1]+'</a> <span class="text-small text-muted">('+n.minutes+":"+n.seconds+")</span></li>"})),a},n=function(a){var s='<h2 class="h3">Latest Episodes</h2>';s+=i(a),e.innerHTML='<ul class="list-unstyled margin-bottom-medium">'+s+'</ul><p><em>Listen to full series on <a href="'+t.itunes+'">iTunes</a> or <a href="'+t.soundcloud+'">SoundCloud</a>.</em></p>'};!(function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&n(JSON.parse(e.response))},e.open("GET","https://api.soundcloud.com/users/422835952/tracks?client_id=HDNfsDscL9cEWTl8lfqFKfLPTErC4Qio"),e.send()})()}},mailchimp=function(e){"use strict";var t=document.querySelector("#mailchimp-form");if(t){var a=t.querySelector("#mailchimp-email");if(a){var s=t.querySelector("#mc-status"),i={empty:"Please provide an email address.",notEmail:"Please use a valid email address.",success:"Success! You'll get an email each time a new podcast episode is available."},n=function(e){for(var t=[],a=0;a<e.elements.length;a++){var s=e.elements[a];s.name&&!s.disabled&&"file"!==s.type&&"reset"!==s.type&&"submit"!==s.type&&"button"!==s.type&&(("checkbox"!==s.type&&"radio"!==s.type||s.checked)&&t.push(encodeURIComponent(s.name)+"="+encodeURIComponent(s.value)))}return t.join("&")},o=function(){s&&(s.textContent="",s.className="",a.className="",a.removeAttribute("aria-describedby"))},r=function(e,t){s&&(s.textContent=e,t?(s.className="success-message",s.setAttribute("tabindex","-1"),s.focus()):(s.className="error-message",a.className="error",a.setAttribute("aria-describedby","mc-status"),a.focus()))},c=function(){var e=t.querySelector("[data-processing]");e&&(e.setAttribute("data-original",e.innerHTML),e.setAttribute("disabled","disabled"),e.innerHTML=e.getAttribute("data-processing"))},u=function(){var e=t.querySelector("[data-processing]");e&&(e.removeAttribute("disabled"),e.innerHTML=e.getAttribute("data-original"))},l=function(t){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){var t=200===a.status,s=JSON.parse(a.responseText);t?r(i.success,t):r(s.message,t),u(),e&&"function"==typeof e&&e(s)}},a.open("POST","https://gomakethings.com/checkout/wp-json/gmt-mailchimp/v1/subscribe?"+t),a.send()},d=function(){c(),l(n(t))},x=function(){return/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$/.test(a.value)},m=function(){return a.value.length<1?(r(i.empty),!1):!!x()||(r(i.notEmail),!1)},f=function(e){e.preventDefault(),o(),m()&&d()};t.addEventListener("submit",f,!1)}}};document.querySelector("#mailchimp-form")&&mailchimp();var episodes=document.querySelector("#latest-episodes");episodes&&latestEpisodes(episodes),api();