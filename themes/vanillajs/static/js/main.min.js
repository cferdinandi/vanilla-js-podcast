/*! vanillajs v1.3.0 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/vanilla-js-podcast */
window.Array&&!Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){t=t||window;for(var a=0;a<this.length;a++)e.call(t,this[a],a,this)});var api=function(){"use strict";var a=document.querySelectorAll("[data-cta]"),s=document.querySelectorAll("[data-testimonial]"),i=document.querySelectorAll("[data-price]"),d=function(e,t,a){var s=e.getAttribute("data-product");if(s){var i="guide-individual"===a&&t["guides-all"]?t["guides-all"]:t[a];i&&(!i[s]||i[s].length<1||(e.innerHTML=i[s]))}},n=function(e,t,a){for(var s=0;s<e.length;s++){var i=e[s].getAttribute("data-"+a);i&&("price"===a||t[i])&&("price"===a?d(e[s],t,i):"cta"===a?(c=e[s],l=t[i],c.innerHTML=l):(n=e[s],r=t[i],void 0,o=n.getAttribute("data-no-photo"),n.innerHTML=o?"<blockquote>"+r.quote+(r.url?'<cite>- <a href="'+r.url+'">'+r.name+"</a></cite>":"<cite>- "+r.name+"</cite>")+"</blockquote>":'<div class="row"><div class="grid-third"><img class="aligncenter margin-bottom-small img-circle" height="150" width="150" src="https://gomakethings.com'+r.photo+'"></div><div class="grid-two-thirds"><blockquote>'+r.quote+(r.url?'<cite>- <a href="'+r.url+'">'+r.name+"</a></cite>":"<cite>- "+r.name+"</cite>")+"</blockquote></div></div>"))}var n,r,o,c,l},r=function(e,t){t&&sessionStorage.setItem("gmt-api-data",e);e=JSON.parse(e);n(a,e.ctas,"cta"),n(s,e.testimonials,"testimonial"),n(i,e.prices,"price")};a.length<1&&s.length<1&&i.length<1||(function(e){var t=sessionStorage.getItem("gmt-api-data");if(t)r(t);else{var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&r(a.responseText,!0)},a.open("GET",e),a.send()}})("https://gomakethings.com/api/data.json")},latestEpisodes=function(a){"use strict";if(a){var s,i="https://itunes.apple.com/us/podcast/the-vanilla-js-podcast/id1364574460",r="https://soundcloud.com/vanillajspodcast/",n=function(e){var n="";return e.forEach((function(e){var t,a,s=e.title.split(" - "),i=(t=e.duration,{minutes:Math.floor(t/1e3/60),seconds:(a=Math.floor(t/1e3%60),(a=a.toString()).length<2?"0"+a:a)});n+='<li class="margin-bottom-small"><strong class="margin-right">'+s[0]+'</strong><a class="link-no-underline" href="'+r+e.permalink+'">'+s[1]+'</a> <span class="text-small text-muted">('+i.minutes+":"+i.seconds+")</span></li>"})),n};(s=new XMLHttpRequest).onreadystatechange=function(){var e,t;4===s.readyState&&200===s.status&&(e=JSON.parse(s.response),t='<h2 class="h3">Latest Episodes</h2>',t+=n(e),a.innerHTML='<ul class="list-unstyled margin-bottom-medium">'+t+'</ul><p><em>Listen to full series on <a href="'+i+'">iTunes</a> or <a href="'+r+'">SoundCloud</a>.</em></p>')},s.open("GET","https://api.soundcloud.com/users/422835952/tracks?client_id=HDNfsDscL9cEWTl8lfqFKfLPTErC4Qio"),s.send()}},mailchimp=function(i){"use strict";var n=document.querySelector("#mailchimp-form");if(n){var a=n.querySelector("#mailchimp-email");if(a){var s=n.querySelector("#mc-status"),e="Please provide an email address.",t="Please use a valid email address.",r="Success! You'll get an email each time a new podcast episode is available.",o=function(e,t){s&&(s.textContent=e,t?(s.className="success-message",s.setAttribute("tabindex","-1"),s.focus()):(s.className="error-message",a.className="error",a.setAttribute("aria-describedby","mc-status"),a.focus()))},c=function(e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){var e,t=200===s.status,a=JSON.parse(s.responseText);o(t?r:a.message,t),(e=n.querySelector("[data-processing]"))&&(e.removeAttribute("disabled"),e.innerHTML=e.getAttribute("data-original")),i&&"function"==typeof i&&i(a)}},s.open("POST","https://gomakethings.com/checkout/wp-json/gmt-mailchimp/v1/subscribe?"+e),s.send()},l=function(){var e;(e=n.querySelector("[data-processing]"))&&(e.setAttribute("data-original",e.innerHTML),e.setAttribute("disabled","disabled"),e.innerHTML=e.getAttribute("data-processing")),c(function(e){for(var t=[],a=0;a<e.elements.length;a++){var s=e.elements[a];s.name&&!s.disabled&&"file"!==s.type&&"reset"!==s.type&&"submit"!==s.type&&"button"!==s.type&&("checkbox"!==s.type&&"radio"!==s.type||s.checked)&&t.push(encodeURIComponent(s.name)+"="+encodeURIComponent(s.value))}return t.join("&")}(n))},d=function(){return a.value.length<1?(o(e),!1):!!/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$/.test(a.value)||(o(t),!1)};n.addEventListener("submit",(function(e){e.preventDefault(),s&&(s.textContent="",s.className="",a.className="",a.removeAttribute("aria-describedby")),d()&&l()}),!1)}}};document.querySelector("#mailchimp-form")&&mailchimp();var episodes=document.querySelector("#latest-episodes");episodes&&latestEpisodes(episodes),api();